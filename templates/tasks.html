<!DOCTYPE html>
<html>
<head>
    <title>Task Entry</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
</head>
<body>
    <h1>Add Task</h1>
    <form action="{{ url_for('tasks') }}" method="post">
        <label for="user_name">Your Name:</label>
        <input type="text" name="user_name" required><br><br>
        
        <label for="role_id">Role:</label>
        <select id="role_id" name="role_id" required>
            <option value="" disabled selected>Select a role</option>
            {% for role in roles %}
                <option value="{{ role['id'] }}">{{ role['name'] }}</option>
            {% endfor %}
        </select><br><br>
        
        <label for="task_name">Task Name:</label>
        <input type="text" name="task_name" required><br><br>
        
        <label for="frequency">Frequency:</label>
        <select id="frequency" name="frequency" required>
            <option value="" disabled selected>Select frequency</option>
            <option value="Daily">Daily</option>
            <option value="Weekly">Weekly</option>
            <option value="Monthly">Monthly</option>
        </select><br><br>
        
        <button type="submit">Add Task</button>
    </form>

    <h2>Existing Tasks</h2>
    <table border="1">
        <thead>
            <tr>
                <th>User Name</th>
                <th>Role Name</th>
                <th>Task Name</th>
                <th>Frequency</th>
            </tr>
        </thead>
        <tbody>
            {% for task in tasks %}
            <tr>
                <td>{{ task['user_name'] }}</td>
                <td>{{ task['role_name'] }}</td>
                <td>{{ task['task_name'] }}</td>
                <td>{{ task['frequency'] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <br>
    <a href="{{ url_for('index') }}">Back to Home</a>

    <script>
        $(document).ready(function() {
            $('#role_id').select2();
            $('#frequency').select2();
        });
    </script>
</body>
</html>
